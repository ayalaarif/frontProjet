<!--== BODY INNER CONTAINER ==-->
<div class="sb2-2">
    <!--== breadcrumbs ==-->
    <div class="sb2-2-2">
        <ul>
            <li><a routerLink="/"><i class="fa fa-home" aria-hidden="true"></i> Accueil</a>
            </li>
            <li class="active-bre"><a> Affecter Notes</a>
            </li>
            <!-- <li class="page-back"><a href="index-2.html"><i class="fa fa-backward" aria-hidden="true"></i> Back</a>
            </li> -->
        </ul>
    </div>

    <!--== User Details ==-->
    <div class="sb2-2-3">
        <div class="row">
            <div class="col-md-12">
                <div class="box-inn-sp admin-form">
                    <div class="inn-title">
                        <h4>Affecter Notes</h4>
                    </div>
                    <div class="tab-inn">
                        <form #noteForm="ngForm" (ngSubmit)="affecterNotes()">

                            <div class="row"*ngIf="showMsg">
                                <div class="input-field col s12">
                                    <p class="alert alert-success">
                                        <strong>Notes affectées avec succès</strong>
                                    </p>
                                </div>
                            </div>

                            <div class="row"
                                *ngIf="MsgError== true && myBtnIdClicked== true">
                                <div class="input-field col s12">
                                    <p class="alert alert-danger">
                                        <strong>Veuillez vérifier vos champs</strong>
                                    </p>
                                </div>
                            </div>

                            <div class="row">
                                <div class="input-field col s6">
                                    <label *ngIf="!box1.value" for="examen">Examen</label>
                                    <select (change)="onSelect()" #box1="ngModel" id="examen" class="form-control"
                                        name="examen_id" [(ngModel)]="listNotes.examen_id" required>

                                        <option *ngFor="let examen of examens" [value]="examen.id">{{examen.libelle}}
                                        </option>
                                        <!-- <div class="input-field col 6">
                                            <strong *ngIf="box1.invalid && box1.touched" class="text-danger">
                                                Veuillez remplir ce champs
                                            </strong>
                                        </div> -->
                                    </select>

                                </div>

                                <div class="input-field col s6">
                                    <!-- <label *ngIf="!box2.value" for="grp">Groupe</label> -->
                                    <select (change)="onSelect2()" #box2="ngModel" id="grp" class="form-control"
                                        name="groupe_id" [(ngModel)]="groupe_id" required>
                                        <option [value]="0" disabled selected>Groupe</option>
                                        <option *ngFor="let groupe of listGroupes" [value]="groupe.id">
                                            {{groupe.niveau.libelle}} {{groupe.num}}</option>
                                    </select>
                                    <!-- <div class="input-field col 6">
                                        <strong *ngIf="box2.invalid && box2.touched" class="text-danger">
                                            Veuillez remplir ce champs
                                        </strong>
                                    </div> -->
                                </div>
                            </div>
                            <ng-container *ngIf="EleveLength==0;else Second">
                                <div class="row">
                                    <div class="input-field col s12">
                                    <h4 style="padding:1%">Il n'y a pas d'élèves dans ce groupe.....</h4>
                                    </div>
                                </div>

                            </ng-container> 
                            <ng-template #Second>

                         <ng-container *ngIf="exist>0;else ElseIf">
                            <div class="table-responsive table-desi">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>élèves</th>
                                            <th>Note</th>
                                            <th>Remarque</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <ng-container *ngFor="let e of found; index as i">
                                           
                                            <tr>
                                                <td>
                                                    <div class="input-field col s6">
                                                        {{i+1}}
                                                    </div>
                                                </td>
                                                
                                                <td>
                                                    <!-- <input type="number"  name="eleve_id" class="validate" [(ngModel)]="listNotes.notes[i].eleve_id"> -->
                                                    <div class="input-field col s12">
                                                        {{e.nom}} {{e.prenom}}
                                                    </div>
                                                </td>
                                            
                                                <td>
                                                    <div class="input-field col s6">
                                                        <input #note="ngModel" type="number" step="0.25" min="0"
                                                            max="20" name="note-{{i}}" class="validate"
                                                            [(ngModel)]="listNotes.notes[i].note" required>
                                                        <label *ngIf="!note.value">Note</label>
                                                        <div class="input-field col 6">
                                                            <strong *ngIf="note.invalid && note.touched"
                                                                class="text-danger">
                                                                Veuillez saisir une entrée valide
                                                            </strong>
                                                        </div>
                                                    </div>
                                                </td>

                                                <td>
                                                    <div class="input-field col s12">
                                                        <input #rq="ngModel"  type="text"
                                                            name="remarque-{{i}}" class="validate"
                                                            [(ngModel)]="listNotes.notes[i].remarque" required>
                                                        <label *ngIf="!rq.value">Remarque</label>
                                                        <div class="input-field col 6">
                                                            <strong *ngIf="rq.invalid && rq.touched"
                                                                class="text-danger">
                                                                Veuillez saisir une entrée valide
                                                            </strong>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </ng-container>   
                                        





                                    </tbody>
                                </table>
                            </div>
                            <div class="row">
                                <div class="input-field col s12">
                                    <i class="waves-effect waves-light btn-large waves-input-wrapper"><input
                                            type="submit" (click)="myBtnClicked()" class="waves-button-input"></i>
                                </div>
                            </div>
                         </ng-container>   
                        </ng-template>
                        
                         <ng-template #ElseIf>
                            <ng-container *ngIf="select">
                                <div class="row">
                                    <div class="input-field col s12">
                                    <h4 style="padding:1%">Notes déjà affectées....</h4>
                                    </div>
                                </div>
                            </ng-container>
                           
                          
                          </ng-template>
                           
                           

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>